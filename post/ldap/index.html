<!DOCTYPE html>
<html>
<head>
<link rel="shortcut icon" href="https://koko-club.github.io/favicon.ico" type="image/x-icon" /><meta name="viewport"content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/><meta name="apple-mobile-web-app-capable"content="yes"/><meta name="apple-mobile-web-app-status-bar-style"content="black"/><meta name="format-detection"content="telephone=no"/><meta name="renderer"content="webkit"><meta name="description"content="æ˜¥é£å¾—æ„é©¬è¹„ç–¾ï¼Œä¸€æ—¥çœ‹å°½é•¿å®‰èŠ±"><meta charset="UTF-8"><title>ldap | Imcry</title>
<link href="https://koko-club.github.io/styles/main.css" type="text/css" rel="stylesheet" /><link href="https://at.alicdn.com/t/font_1621793_zatzzgvf30g.css" type="text/css" rel="stylesheet" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.css"><script async src="https://cdn.jsdelivr.net/npm/busuanzi@2.3.0/bsz.pure.mini.min.js"></script><script src="https://koko-club.github.io/media/js/magnify.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js"></script>
<script type="text/javascript">function btn_toggle(){document.getElementById("hn").classList.contains("no-js")?document.getElementById("hn").classList.remove("no-js"):document.getElementById("hn").classList.add("no-js")}</script>

<link rel="canonical" href="https://koko-club.github.io/post/ldap/" />
</head>
<body>
<div class="progress"></div><style>.progress{background:linear-gradient(to right,#87ceeb var(--scroll),transparent 0);background-repeat:no-repeat;position:fixed;width:100%;height:4px;z-index:1}</style><div class="darkmode-background"></div><div class="darkmode-layer"></div>
<noscript><p class="warn" >æœ¬é¡µé¢éœ€è¦æµè§ˆå™¨æ”¯æŒï¼ˆå¯ç”¨ï¼‰JavaScript</p></noscript><div class="header"><div class="logo_title"><div class="title animated fadeInDown"><a href="https://koko-club.github.io"><img alt="logo" style="display:inline-block;" src="https://koko-club.github.io/images/avatar.png"/></a><h1 title="Imcry" class="weaklink"><a  href="/">Imcry</a></h1>

<div class="navbar weaklink">
<div class="normal_nav">
<div class="bitcron_nav_container"><div class="bitcron_nav"><div class="bitcron_nav"><div style="display:flex;justify-content:center;"><nav class="mixed_site_nav_wrap site_nav_wrap"><ul class="mixed_site_nav site_nav sm sm-base">	<li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >é¦–é¡µ</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >å½’æ¡£</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >æ ‡ç­¾</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >å…³äº</a></li></ul></nav>
<div style="float:right;margin-top:1em"><form id="gridea-search-form" data-update="1578893743252" action="/search/index.html"><input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="Search..."></form></div><div style="margin-left:0.5em;margin-top:1.2em"><input id="switch_default" onclick="mobileBtn()" type="checkbox" class="switch_default"><label for="switch_default" class="toggleBtn"></label></div></div>
<div class="clear clear_nav_inline_end"></div></div></div><div class="clear clear_nav_end"></div></div></div><div class="hamberger" href="javascript:void(0)" onclick="btn_toggle();"><i class="iconfont icon-category"></i></div></div></div></div>
<div id="hn" class="no-js hidden_nav animated fadeInDown"><div class="bitcron_nav_container"><div class="bitcron_nav"><nav class="mixed_site_nav_wrap site_nav_wrap"><ul class="mixed_site_nav site_nav sm sm-base">	<li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >é¦–é¡µ</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >å½’æ¡£</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >æ ‡ç­¾</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >å…³äº</a></li></ul><div class="clear clear_nav_inline_end"></div></nav></div><div class="clear clear_nav_end"></div></div>
<div style="display:flex;justify-content:center;inline-block;text-align:center;margin-top:7%"><div><form id="gridea-search-form" data-update="1677484698183" action="/search/index.html"><input class="search-input" autocomplete="off" spellcheck="false" name="q"  placeholder="Search..." /></form></div><div style="margin-left:0.5em"><input id="switch_default_h" onclick="mobileBtn()" type="checkbox" class="switch_default"><label for="switch_default" class="toggleBtn"></label></div></div>
</div></div>
<script>function enableDarkmode(){document.body.classList.add("darkmode"),document.getElementById("switch_default").checked=1,document.getElementById("switch_default_h").checked=1}function removeDarkmode(){document.body.classList.remove("darkmode"),document.getElementById("switch_default").checked=0,document.getElementById("switch_default_h").checked=0}function getCookie(a){var b,c=new RegExp("(^| )"+a+"=([^;]*)(;|$)");return(b=document.cookie.match(c))?unescape(b[2]):null}cookie=getCookie("darkmode"),"enable"==cookie&&enableDarkmode(),window.matchMedia("(prefers-color-scheme: dark)").matches&&"disable"!==cookie&&(enableDarkmode(),document.cookie="darkmode=enable; path=/");var mobileBtn=function(){1==document.getElementById("switch_default").checked?(enableDarkmode(),document.cookie="darkmode=enable; path=/"):(removeDarkmode(),document.cookie="darkmode=disable; path=/")};</script>

<div class="main"><div class="main-inner"><div class="content">
<article class="post">
<h2 class="post_title sm_margin"><a>ldap</a></h2>
<script>function lan(){if(document.getElementById("lan").innerText=="ç¹"){var s=document.getElementById("tongwenlet_cn");if(s!=null){document.body.removeChild(s)}var s=document.createElement("script");s.language="javascript";s.type="text/javascript";s.src="https://cdn.jsdelivr.net/gh/qyxtim/Static@1.1/bookmarklet_tw.js";s.id="tongwenlet_cn";document.body.appendChild(s);document.getElementById("lan").innerHTML="ç®€"}else{if(document.getElementById("lan").innerText=="ç°¡"){var s=document.getElementById("tongwenlet_cn");if(s!=null){document.body.removeChild(s)}var s=document.createElement("script");s.language="javascript";s.type="text/javascript";s.src="https://cdn.jsdelivr.net/gh/qyxtim/Static@1.1/bookmarklet_cn.js";s.id="tongwenlet_cn";document.body.appendChild(s);document.getElementById("lan").innerHTML="ç¹"}}};</script>
<section class="post_details"><i class="iconfont icon-calendar"></i><span style="margin-right:15px"> 2023-02-13</span><i class="iconfont icon-browse"></i><span style="margin-right:15px"> <span id="busuanzi_value_page_pv"></span> Views</span><i class="iconfont icon-category"></i><span class="weaklink" style="margin-right:15px"></span><i class="iconfont icon-caret-down"></i><span style="margin-right:15px">4896å­—</span><i class="iconfont icon-naozhong"></i><span style="margin-right:15px">20 min read</span><a id="lan" href="javascript:void(0);"onclick="lan();"title="è°ƒæ•´ç®€ç¹ä½“" style="margin-right:15px;">ç¹</a>
</section>

<div style="display:flex">
<div class="md_block" id="md_block">
<div class="round-shape-one"></div>
<h1 id="ldap">ldap</h1>
<h2 id="ä»€ä¹ˆæ˜¯ldap">ä»€ä¹ˆæ˜¯ldap</h2>
<pre><code>        é¦–å…ˆLDAPæ˜¯ä¸€ç§é€šè®¯åè®®ï¼ŒLDAPæ”¯æŒTCP/IPã€‚åè®®å°±æ˜¯æ ‡å‡†ï¼Œå¹¶ä¸”æ˜¯æŠ½è±¡çš„ã€‚åœ¨è¿™å¥—æ ‡å‡†ä¸‹ï¼ŒADï¼ˆActive Directoryï¼‰æ˜¯å¾®è½¯å‡ºçš„ä¸€å¥—å®ç°ã€‚
        é‚£ADæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæš‚ä¸”æŠŠå®ƒç†è§£æˆæ˜¯ä¸ªæ•°æ®åº“ã€‚ä¹Ÿæœ‰å¾ˆå¤šäººç›´æ¥æŠŠLDAPè¯´æˆæ•°æ®åº“(å¯ä»¥æŠŠLDAPç†è§£æˆå­˜å‚¨æ•°æ®çš„æ•°æ®åº“)ã€‚åƒæ˜¯å…¶ä»–æ•°æ®åº“ä¸€æ ·ï¼ŒLDAPä¹Ÿæ˜¯æœ‰clientç«¯å’Œserverç«¯ã€‚serverç«¯æ˜¯ç”¨æ¥å­˜æ”¾èµ„æºï¼Œclientç«¯ç”¨æ¥æ“ä½œå¢åˆ æ”¹æŸ¥ç­‰æ“ä½œã€‚
        è€Œæˆ‘ä»¬é€šå¸¸è¯´çš„LDAPæ˜¯æŒ‡è¿è¡Œè¿™ä¸ªæ•°æ®åº“çš„æœåŠ¡å™¨ã€‚
        å¯ä»¥ç®€å•ç†è§£AD =LDAPæœåŠ¡å™¨ï¼‹LDAPåº”ç”¨ã€‚
</code></pre>
<h2 id="ç”¨é€”">ç”¨é€”</h2>
<pre><code>ç”¨äºç»Ÿä¸€è®¤è¯ç®¡ç†ï¼Œç»Ÿä¸€å…¬å¸å†…éƒ¨æœåŠ¡è´¦å·å¯†ç ã€‚
</code></pre>
<h2 id="ldap-æ¨¡å‹">LDAP æ¨¡å‹</h2>
<h3 id="åŸºæœ¬æ¨¡å‹">åŸºæœ¬æ¨¡å‹</h3>
<pre><code>ç›®å½•æ ‘ï¼šåœ¨ä¸€ä¸ªç›®å½•æœåŠ¡ç³»ç»Ÿä¸­ï¼Œæ•´ä¸ªç›®å½•ä¿¡æ¯é›†å¯ä»¥è¡¨ç¤ºä¸ºä¸€ä¸ªç›®å½•ä¿¡æ¯æ ‘ï¼Œæ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹æ˜¯ä¸€ä¸ªæ¡ç›®ã€‚
æ¡ç›®ï¼šæ¯ä¸ªæ¡ç›®å°±æ˜¯ä¸€æ¡è®°å½•ï¼Œæ¯ä¸ªæ¡ç›®æœ‰è‡ªå·±çš„å”¯ä¸€å¯åŒºåˆ«çš„åç§°ï¼ˆDNï¼‰ã€‚
å¯¹è±¡ç±»ï¼šæ˜¯æŸä¸ªå®ä½“ç±»å‹å¯¹åº”çš„ä¸€ç»„å±æ€§ï¼Œå¯¹è±¡ç±»å¯ä»¥ç»§æ‰¿ï¼Œçˆ¶ç±»çš„å¿…é¡»å±æ€§ä¹Ÿä¼šè¢«ç»§æ‰¿ä¸‹æ¥ã€‚
å±æ€§ï¼šæè¿°æ¡ç›®çš„æŸä¸ªæ–¹é¢çš„ä¿¡æ¯ï¼Œä¸€ä¸ªå±æ€§ç”±ä¸€ä¸ªå±æ€§ç±»å‹å’Œä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§å€¼ç»„æˆï¼Œå±æ€§æœ‰å¿…é¡»å±æ€§å’Œéå¿…é¡»å±æ€§ã€‚

</code></pre>
<table>
<thead>
<tr>
<th><strong>å…³é”®å­—</strong></th>
<th><strong>è‹±æ–‡å…¨ç§°</strong></th>
<th><strong>å«ä¹‰</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>dc</strong></td>
<td>Domain Component</td>
<td>åŸŸåçš„éƒ¨åˆ†ï¼Œå…¶æ ¼å¼æ˜¯å°†å®Œæ•´çš„åŸŸååˆ†æˆå‡ éƒ¨åˆ†ï¼Œå¦‚åŸŸåä¸ºexample.comå˜æˆdc=example,dc=comï¼ˆä¸€æ¡è®°å½•çš„æ‰€å±ä½ç½®ï¼‰</td>
</tr>
<tr>
<td><strong>uid</strong></td>
<td>User Id</td>
<td>ç”¨æˆ·ID songtao.xuï¼ˆä¸€æ¡è®°å½•çš„IDï¼‰</td>
</tr>
<tr>
<td><strong>ou</strong></td>
<td>Organization Unit</td>
<td>ç»„ç»‡å•ä½ï¼Œç»„ç»‡å•ä½å¯ä»¥åŒ…å«å…¶ä»–å„ç§å¯¹è±¡ï¼ˆåŒ…æ‹¬å…¶ä»–ç»„ç»‡å•å…ƒï¼‰ï¼Œå¦‚â€œoaç»„â€ï¼ˆä¸€æ¡è®°å½•çš„æ‰€å±ç»„ç»‡ï¼‰</td>
</tr>
<tr>
<td><strong>cn</strong></td>
<td>Common Name</td>
<td>å…¬å…±åç§°ï¼Œå¦‚â€œThomas Johanssonâ€ï¼ˆä¸€æ¡è®°å½•çš„åç§°ï¼‰</td>
</tr>
<tr>
<td><strong>sn</strong></td>
<td>Surname</td>
<td>å§“ï¼Œå¦‚â€œè®¸â€</td>
</tr>
<tr>
<td><strong>dn</strong></td>
<td>Distinguished Name</td>
<td>â€œuid=songtao.xu,ou=oaç»„,dc=example,dc=comâ€ï¼Œä¸€æ¡è®°å½•çš„ä½ç½®ï¼ˆå”¯ä¸€ï¼‰</td>
</tr>
<tr>
<td><strong>rdn</strong></td>
<td>Relative dn</td>
<td>ç›¸å¯¹è¾¨åˆ«åï¼Œç±»ä¼¼äºæ–‡ä»¶ç³»ç»Ÿä¸­çš„ç›¸å¯¹è·¯å¾„ï¼Œå®ƒæ˜¯ä¸ç›®å½•æ ‘ç»“æ„æ— å…³çš„éƒ¨åˆ†ï¼Œå¦‚â€œuid=tomâ€æˆ–â€œcn= Thomas Johanssonâ€</td>
</tr>
</tbody>
</table>
<pre><code>dn ï¼šä¸€æ¡è®°å½•çš„è¯¦ç»†ä½ç½®ã€‚ç›®å½•ä½ç½®
dc ï¼šä¸€æ¡è®°å½•æ‰€å±åŒºåŸŸ (å“ªä¸€é¢—æ ‘)ã€‚æ ¹åç§°
ou ï¼šä¸€æ¡è®°å½•æ‰€å±ç»„ç»‡ ï¼ˆå“ªä¸€ä¸ªåˆ†æ”¯ï¼‰ã€‚ç»„åç§°
cn/uidï¼šä¸€æ¡è®°å½•çš„åå­—/ID (å“ªä¸€ä¸ªè‹¹æœåå­—)ã€‚ç”¨æˆ·åç§°
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://koko-club.github.io/post-images/ldap/ldap_tree.png" alt="img" loading="lazy"></figure>
<h3 id="ä¿¡æ¯æ¨¡å‹">ä¿¡æ¯æ¨¡å‹</h3>
<p>LDAPä¸­ï¼Œä¿¡æ¯ä»¥æ ‘çŠ¶æ–¹å¼è¿›è¡Œç»„ç»‡çš„ï¼Œåœ¨æ ‘çŠ¶ä¿¡æ¯ä¸­çš„åŸºæœ¬æ•°æ®å•å…ƒæ˜¯æ¡ç›®ï¼Œè€Œæ¯ä¸ªæ¡ç›®ç”±å±æ€§æ„æˆï¼Œå±æ€§ä¸­å­˜å‚¨æœ‰å±æ€§å€¼;</p>
<h3 id="å‘½åæ¨¡å‹">å‘½åæ¨¡å‹</h3>
<p>å³LDAPä¸­çš„æ¡ç›®å®šä½æ–¹å¼ï¼Œåœ¨LDAPä¸­æ¯ä¸ªæ¡ç›®å‡æœ‰è‡ªå·±çš„DNã€‚<br>
DNæ˜¯è¯¥æ¡ç›®åœ¨æ•´ä¸ªæ ‘ä¸­çš„å”¯ä¸€åç§°æ ‡è¯†ï¼Œ</p>
<p>å¦‚åŒæ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œå¸¦è·¯å¾„çš„æ–‡ä»¶åå°±æ˜¯DNã€‚</p>
<h3 id="åŠŸèƒ½æ¨¡å‹">åŠŸèƒ½æ¨¡å‹</h3>
<p>åœ¨LDAPä¸­å…±æœ‰å››ç±»10ç§æ“ä½œï¸°<br>
æŸ¥è¯¢ç±»æ“ä½œï¼šå¦‚æœç´¢ã€æ¯”è¾ƒ;<br>
æ›´æ–°ç±»æ“ä½œï¼šå¦‚æ·»åŠ æ¡ç›®ã€åˆ é™¤æ¡ç›®ã€ä¿®æ”¹æ¡ç›®ã€ä¿®æ”¹æ¡ç›®å;<br>
è®¤è¯ç±»æ“ä½œï¼šå¦‚ç»‘å®šã€è§£ç»‘å®š;<br>
å…¶å®ƒæ“ä½œï¼šå¦‚æ”¾å¼ƒå’Œæ‰©å±•æ“ä½œã€‚</p>
<p>é™¤äº†æ‰©å±•æ“ä½œï¼Œå¦å¤–9ç§æ˜¯LDAPçš„æ ‡å‡†æ“ä½œï¹”</p>
<p>æ‰©å±•æ“ä½œæ˜¯LDAPä¸­ä¸ºäº†å¢åŠ æ–°çš„åŠŸèƒ½ï¼Œæä¾›çš„ä¸€ç§æ ‡å‡†çš„æ‰©å±•æ¡†æ¶ï¼Œå½“å‰å·²ç»æˆä¸ºLDAPæ ‡å‡†çš„æ‰©å±•æ“ä½œï¼Œæœ‰ä¿®æ”¹å¯†ç å’ŒstartTLSæ‰©å±•ï¼Œ</p>
<p>åœ¨æ–°çš„RFCæ ‡å‡†å’Œè‰æ¡ˆä¸­æ­£åœ¨å¢åŠ ä¸€äº›æ–°çš„æ‰©å±•æ“ä½œï¼Œä¸åŒçš„LDAPå‚å•†ä¹Ÿå‡å®šä¹‰äº†è‡ªå·±çš„æ‰©å±•æ“ä½œã€‚</p>
<h3 id="å®‰å…¨æ¨¡å‹">å®‰å…¨æ¨¡å‹</h3>
<p>å®‰å…¨æ¨¡å‹ä¸»è¦é€šè¿‡èº«ä»½è®¤è¯ã€å®‰å…¨é€šé“å’Œè®¿é—®æ§åˆ¶æ¥å®ç°ã€‚</p>
<h1 id="ldap-server">ldap server</h1>
<p>ä¸€èˆ¬ldapæœåŠ¡ç«¯æ¯”è¾ƒå¸¸ç”¨çš„æ˜¯openldapï¼Œè¿™é‡Œä»…è®°å½•openldapçš„éƒ¨ç½²åŠä½¿ç”¨ã€‚</p>
<h2 id="openldap">openldap</h2>
<h3 id="k8séƒ¨ç½²">k8séƒ¨ç½²</h3>
<p>ç›´æ¥ç”¨yamléƒ¨ç½²å°±è¡Œï¼Œé•œåƒç”¨çš„æ˜¯bitnamiçš„ldapé•œåƒ</p>
<pre><code>apiVersion: apps/v1
kind: Deployment
metadata:
  name: openldap
spec:
  replicas: 1
  selector:
    matchLabels:
      app: openldap
  strategy:
    rollingUpdate:
      maxSurge: 25%
      maxUnavailable: 25%
    type: RollingUpdate
  template:
    metadata:
      labels:
        app: openldap
    spec:
      containers:
      - env:
        - name: LDAP_ADMIN_USERNAME
          value: admin
        - name: LDAP_ADMIN_PASSWORD
          value: &quot;123456&quot;
        - name: LDAP_USERS
          value: manager
        - name: LDAP_PASSWORDS
          value: &quot;123456&quot;
        - name: LDAP_ROOT
          value: dc=finsiot,dc=com
        image: bitnami/openldap:latest
        imagePullPolicy: Always
        name: openldap
        ports:
        - containerPort: 1389
          name: service
          protocol: TCP
        resources:
          limits:
            cpu: &quot;1&quot;
            memory: 2Gi
          requests:
            cpu: &quot;1&quot;
            memory: 2Gi
        volumeMounts:
        - mountPath: /bitnami/openldap/data
          name: openldap-pvc
          subPath: ldap
        - mountPath: /bitnami/openldap/slapd.d
          name: openldap-pvc
          subPath: slapd.d
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      terminationGracePeriodSeconds: 30
      volumes:
      - name: openldap-pvc
        persistentVolumeClaim:
          claimName: ldap-pvc
---

apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: ldap-pvc
  labels:
    app: ldap
spec:
  storageClassName: csi-rbd-sc   #è¿™é‡Œçš„storageclassæ˜¯æˆ‘ä»¬ä¹‹å‰ç”³è¯·çš„
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 2Gi
---
apiVersion: v1
kind: Service
metadata:
  name: openldap
spec:
  #clusterIP: 192.168.110.29
  #externalTrafficPolicy: Cluster
  ports:
  - nodePort: 30300
    port: 1389
    protocol: TCP
    targetPort: service
  selector:
    app: openldap
  sessionAffinity: None
  type: NodePort
status:
  loadBalancer: {}
</code></pre>
<h3 id="ldapäºŒè¿›åˆ¶éƒ¨ç½²">ldapäºŒè¿›åˆ¶éƒ¨ç½²</h3>
<p>è¿™é‡Œæ²¡æœ‰å°è¯•è¿‡äºŒè¿›åˆ¶éƒ¨ç½²ldapï¼Œåé¢ä¼šå†™ã€‚</p>
<h3 id="ldapç®¡ç†">ldapç®¡ç†</h3>
<p>ç®¡ç†æ“ä½œldapæ•°æ®å¯ä»¥ä½¿ç”¨ldapå®¢æˆ·ç«¯æˆ–è€…ldapç®¡ç†æœåŠ¡å·¥å…·å®ç°ã€‚å¦‚æœä½¿ç”¨ldap windowså®¢æˆ·ç«¯å¯ä»¥ä¸‹è½½LDAPSoft Ldap Browserä½¿ç”¨ï¼Œå¦‚æœä½¿ç”¨ç®¡ç†webé¡µé¢å¯ä»¥éƒ¨ç½²æœåŠ¡ï¼šldapphpadminã€‚</p>
<h2 id="ldapphpadmin">ldapphpadmin</h2>
<h3 id="k8séƒ¨ç½²-2">k8séƒ¨ç½²</h3>
<pre><code>
apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    kompose.cmd: kompose convert -f docker-compose.yml
    kompose.version: 1.16.0 (0c01309)
  creationTimestamp: null
  labels:
    io.kompose.service: phpldapadmin
  name: phpldapadmin
spec:
  replicas: 1
  strategy: {}
  selector:                #å®šä¹‰é€‰æ‹©å™¨
    matchLabels:           #åŒ¹é…ä¸Šé¢çš„æ ‡ç­¾
        io.kompose.service: phpldapadmin         #åŒ¹é…æ¨¡æ¿åç§°
  template:
    metadata:
      creationTimestamp: null
      labels:
        io.kompose.service: phpldapadmin
    spec:
      containers:
      - env:
        - name: PHPLDAPADMIN_HTTPS
          value: &quot;false&quot;
        - name: PHPLDAPADMIN_LDAP_HOSTS
          value: 'ldap://192.168.110.29:30389'
        image: osixia/phpldapadmin:0.7.1
        name: phpldapadmin
        ports:
        - containerPort: 80
        resources: {}
      restartPolicy: Always
---
apiVersion: v1
kind: Service
metadata:ZZ
  labels:
    io.kompose.service: phpldapadmin
  name: phpldapadmin
spec:
  ports:
  - name: &quot;8080&quot;
    port: 8080
    targetPort: 80
  selector:
    io.kompose.service: phpldapadmin
</code></pre>
<h1 id="ldap-for-nexus">ldap for nexus</h1>
<p>æœ¬æ–‡ä¸»è¦ä¸ºnexusé›†æˆåˆ°ldapçš„é…ç½®ï¼Œç”±äºç½‘ä¸Šå…³äºè¯¥åŠŸèƒ½çš„é…ç½®å¤§éƒ½å±‚æ¬¡ä¸é½ä¸”å†™çš„å¤ªæ¨¡ç³Šï¼Œæ•…è®°å½•æ­¤æ–‡æ¡£ã€‚</p>
<h2 id="1-ldapé…ç½®">1ã€ldapé…ç½®</h2>
<p>è¿™é‡Œldapç”¨çš„æ˜¯openldapï¼Œæ‰€ä»¥é¦–å…ˆéœ€è¦éƒ¨ç½²å¥½openldapã€‚é¦–å…ˆæƒ³è¦åœ¨nexusä¸­é›†æˆldapï¼Œldapçš„æœåŠ¡ç«¯å¿…é¡»è¦æœ‰ç»„å’Œç”¨æˆ·ã€‚</p>
<pre><code>è¿™é‡Œçš„ç»„ç”¨æ¥æ˜ å°„ä¸nexusçš„è§’è‰²ï¼Œä½¿å…¶ç»„ä¸‹é¢çš„ç”¨æˆ·éƒ½æ‹¥æœ‰nexusæ˜ å°„è§’è‰²çš„æƒé™ï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚
è¿™é‡Œçš„ç”¨æˆ·åˆ™ç”¨æ¥ç™»å½•nexusã€‚
</code></pre>
<p>æ‰€ä»¥éœ€è¦åˆ›å»ºå¥½ç»„å’Œç”¨æˆ·ï¼Œè¿™é‡Œä»¥æ˜ å°„ä¸€ä¸ªnexusç®¡ç†å‘˜ä¸ºä¾‹å­ï¼Œé¦–å…ˆåˆ›å»ºå‡†å¤‡å¥½ldapçš„ç”¨æˆ·å’Œç»„ï¼š</p>
<pre><code>åˆ›å»ºä¸€ä¸ªouä¸ºnexusï¼Œç»„ä¸ºmanagerï¼Œç”¨æˆ·ä¸ºnexusï¼Œå…ˆåˆ›å»ºç»„ï¼Œç„¶ååˆ›å»ºç”¨æˆ·æŒ‡å®šç»„ã€‚
ç»„:cn=manager,ou=nexus,dc=finsiot,dc=com
ç”¨æˆ·:cn=nexus,ou=nexus,dc=finsiot,dc=com
</code></pre>
<figure data-type="image" tabindex="2"><img src="https://koko-club.github.io/post-images/ldap/image-20221110171353237.png" alt="image-20221110171353237" loading="lazy"></figure>
<h2 id="2-nexusé…ç½®">2ã€nexusé…ç½®</h2>
<pre><code>	1.è®¿é—®nexus-webç®¡ç†é¡µé¢ï¼Œç™»å½•ç®¡ç†å‘˜è´¦å·ï¼Œè¿›å…¥è®¾ç½®-ã€‹secruity-ã€‹LDAP-ã€‹create connection
	2.connectioné…ç½®ï¼š
		nameï¼šè¿™ä¸ªæ˜¯è¦åˆ›å»ºçš„ldapåç§°ï¼Œå¯ä»¥éšä¾¿å¡«ï¼Œéå…³é”®æ€§å‚æ•°ã€‚
		Ldap server address:å¡«å…¥ldapåœ°å€
		Search base Dn:å¡«å…¥dnåœ°å€ï¼ˆdcçš„åœ°å€ï¼‰
		Authentication method: Simple Authentication
		Username or DN: å¡«å…¥ç™»å½•ç”¨æˆ·å(ä¸€èˆ¬ç”¨adminç®¡ç†å‘˜ç™»å½•)
		password: å¯†ç 
	3.User and groupé…ç½®ï¼š
		configuration template: é€‰æ‹©ä¸€ä¸ªæ¨¡æ¿ï¼Œéå…³é”®æ€§å‚æ•°ï¼Œåªæ˜¯ä¼šé¢„å…ˆç»™å‡ºä¸‹é¢ä¸€äº›å‚æ•°çš„å€¼ã€‚è¿™é‡Œå¯ä»¥é€‰posix with static groups
		user relative dn(base dn):å¯¹åº”äºç”¨ä½œç”¨æˆ·æ¡ç›®åŸºç¡€çš„ä¸“æœ‰åç§°é›†åˆã€‚æ­¤DNä¸å‰é¢çš„search baseç›¸å…³ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç”¨æˆ·éƒ½åŒ…å«åœ¨ou = nexusï¼Œdc=finsiot,dc=comä¸­ï¼Œå‰é¢ç™»å½•æ—¶æŒ‡å®šäº†dc=finsiot,dc=comçš„æœç´¢åº“ï¼Œåˆ™è¿™é‡Œä½¿ç”¨å€¼ou = nexusã€‚
		User subtreeï¼šÂ å¦‚æœåŸºæœ¬DNä¸‹é¢çš„æ ‘å¯ä»¥åŒ…å«ç”¨æˆ·æ¡ç›®ï¼Œåˆ™å€¼ä¸ºtrue;å¦‚æœæ‰€æœ‰ç”¨æˆ·éƒ½åŒ…å«åœ¨æŒ‡å®šçš„åŸºæœ¬DNä¸­ï¼Œåˆ™ä¸ºfalseã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‰€æœ‰ç”¨æˆ·éƒ½åœ¨ou = usersï¼Œdc = sonatypeï¼Œdc = comï¼Œåˆ™æ­¤å­—æ®µåº”ä¸ºFalseã€‚å¦‚æœç”¨æˆ·å¯ä»¥åœ¨ç»„ç»‡å•ä½å†…çš„ç»„ç»‡å•ä½ä¸­æ˜¾ç¤ºï¼Œä¾‹å¦‚ou = developmentï¼Œou = usersï¼Œdc = sonatypeï¼Œdc = comï¼Œåˆ™æ­¤å­—æ®µåº”ä¸ºTrueã€‚
		Object classï¼š æ­¤å€¼æ˜¯RFC-2798ä¸­å®šä¹‰çš„æ ‡å‡†å¯¹è±¡ç±»ã€‚å®ƒä¸ºç”¨æˆ·æŒ‡å®šå¯¹è±¡ç±»ã€‚å¸¸è§å€¼ä¸ºinetOrgPersonï¼Œpersonï¼Œuseræˆ–posixAccountã€‚è¿™é‡Œä½¿ç”¨æ¨¡æ¿é»˜è®¤çš„posixAccount
		User filterï¼š è¿™å…è®¸æ‚¨é…ç½®è¿‡æ»¤å™¨ä»¥é™åˆ¶å¯¹ç”¨æˆ·è®°å½•çš„æœç´¢ã€‚å®ƒå¯ä»¥ç”¨ä½œæ€§èƒ½æ”¹è¿›ã€‚è¿™é‡Œä¸ç”¨å¡«å†™ã€‚
		User ID attributeï¼š è¿™æ˜¯ä¸Šé¢æŒ‡å®šçš„å¯¹è±¡ç±»çš„å±æ€§ï¼Œå®ƒä»LDAPæœåŠ¡å™¨æä¾›ç”¨æˆ·çš„æ ‡è¯†ç¬¦ã€‚å­˜å‚¨åº“ç®¡ç†å™¨ä½¿ç”¨æ­¤å±æ€§ä½œä¸ºç”¨æˆ·IDå€¼ã€‚åœ¨ldapåˆ›å»ºäº†ç”¨æˆ·ä»¥åï¼Œé‡Œé¢æœ‰ä¸€ä¸ªå±æ€§å€¼ï¼ˆé»˜è®¤ä¸ºuidï¼‰ï¼Œä¾‹å¦‚æˆ‘è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªnexusçš„ç”¨æˆ·ï¼Œåˆ™ä¼šæœ‰ä¸€ä¸ªuidçš„å€¼ä¸ºnexusï¼ŒnexusæœåŠ¡éœ€è¦é€šè¿‡è¿™ä¸ªkey:valueæ¥æ‰¾åˆ°è¯¥ç”¨æˆ·
		Real name attributeï¼š è¿™æ˜¯Objectç±»çš„å±æ€§ï¼Œå®ƒæä¾›ç”¨æˆ·çš„çœŸå®å§“åã€‚å­˜å‚¨åº“ç®¡ç†å™¨åœ¨éœ€è¦æ˜¾ç¤ºç”¨æˆ·çš„çœŸå®å§“åæ—¶ä½¿ç”¨æ­¤å±æ€§ï¼Œç±»ä¼¼äºå†…éƒ¨åå­—å’Œå§“æ°å±æ€§çš„ä½¿ç”¨ã€‚è¿™ä¸ªä¹Ÿæ˜¯å»æ‰¾ldapé‡Œé¢çš„kvå±æ€§ï¼Œé»˜è®¤æ˜¯keyçš„åç§°ä¸ºcnã€‚
		Email attribute: åŒä¸Šé¢çš„User ID attributeå’ŒReal name attributeï¼Œé»˜è®¤keyçš„åç§°ä¸ºmailã€‚
		Password attribute:ä¸ç”¨å¡«å†™ï¼Œè¿™é‡Œä¸ºç©ºåˆ™ä¼šåœ¨ç™»å½•æ—¶è¯»å–ldapä¸­ç”¨æˆ·çš„passwordå­—æ®µã€‚
		Map LDAP groups as rolesï¼šè¿™é‡Œéœ€è¦å‹¾é€‰ï¼Œä¸‹é¢æ˜¯ç»„çš„é…ç½®ï¼Œç”¨äºå°†ldapç»„æ˜ å°„äºnexusã€‚
		Group type: static Groups è¿™é‡Œé€‰æ‹©é™æ€ç»„
		Group relative DN: æŒ‡åç»„çš„DNä½ç½®ï¼Œä¾‹å¦‚æˆ‘è¿™é‡Œmanagerç»„åœ¨nexusä¸‹é¢ï¼Œåˆ™è¿™é‡Œå¡«ou=nexusã€‚
		Group subtree: å‹¾é€‰ï¼Œè¡¨ç¤ºæ˜¯ä½äºgroupä¸‹é¢çš„å­ç»„ã€‚ä¾‹å¦‚æˆ‘ä¸Šé¢ou=nexusï¼Œåˆ™è¿™é‡Œå‹¾é€‰çš„æ„æ€æ˜¯nexusä¸‹é¢çš„ç»„ã€‚
		Group object class: ç»„åˆ›å»ºæ—¶ä¼šæœ‰è¿™ä¸ªå­—æ®µï¼Œé»˜è®¤ä¸ºposixGroupã€‚å’Œä¸Šé¢å®šä¹‰User ID attributeå’ŒReal name attributeå’ŒEmail attributeæ˜¯ä¸€æ ·çš„ã€‚
		Group ID attributeï¼š è¿™é‡Œè¡¨ç¤ºç»„çš„idå±æ€§ï¼Œå’Œä¸Šé¢å®šä¹‰User ID attributeå’ŒReal name attributeå’ŒEmail attributeæ˜¯ä¸€æ ·çš„ã€‚
		Group member attribute: è¿™é‡Œè¡¨ç¤ºç»„é‡Œé¢æœ‰å“ªäº›æˆå‘˜ï¼Œå’Œä¸Šé¢ä¸¤ä¸ªå±æ€§ä¸€æ ·ï¼Œä¹Ÿæ˜¯ldapç»„ä¸­çš„å­—æ®µï¼Œä½†é»˜è®¤ä¸ä¼šåˆ›å»ºè¿™ä¸ªå­—æ®µï¼Œè¯·æ‰‹åŠ¨åˆ›å»ºmemberUidçš„å­—æ®µå¹¶æŠŠæˆå‘˜çš„å­—æ®µå€¼å†™å…¥è¯¥å­—æ®µï¼Œå¦åˆ™ä¼šæ‰¾ä¸åˆ°æ˜ å°„çš„è§’è‰²ã€‚
		Group member format: è¯¥å­—æ®µç”¨æ¥æ‰¾åˆ°memberUidä¸­çš„ç»„å‘˜åç§°çš„ï¼Œä½¿ç”¨å˜é‡${username}ã€‚
</code></pre>
<figure data-type="image" tabindex="3"><img src="https://koko-club.github.io/post-images/ldap/image-20221110171338946.png" alt="image-20221110171338946" loading="lazy"></figure>
<figure data-type="image" tabindex="4"><img src="https://koko-club.github.io/post-images/ldap/image-20221110171215302.png" alt="image-20221110171215302" loading="lazy"></figure>
<figure data-type="image" tabindex="5"><img src="https://koko-club.github.io/post-images/ldap/image-20221110171237900.png" alt="image-20221110171237900" loading="lazy"></figure>
<figure data-type="image" tabindex="6"><img src="https://koko-club.github.io/post-images/ldap/image-20221110171249864.png" alt="image-20221110171249864" loading="lazy"></figure>
<h3 id="åˆ›å»ºè§’è‰²">åˆ›å»ºè§’è‰²</h3>
<p>åœ¨nexusè®¾ç½®-ã€‹security-ã€‹rolesä¸­æ·»åŠ ä¸€ä¸ªroleï¼Œtypeä¸ºexternal role mappingï¼Œexternal role typeä¸ºldapã€‚</p>
<figure data-type="image" tabindex="7"><img src="https://koko-club.github.io/post-images/ldap/image-20221110171612944.png" alt="image-20221110171612944" loading="lazy"></figure>
<pre><code>Mapped Roleï¼šè¯·å¡«å†™ä¸ºldapä¸­åˆ›å»ºçš„ç»„åç§°ï¼Œä¸¤ä¸ªæœåŠ¡ä¼šé€šè¿‡åç§°è¿›è¡Œæ˜ å°„ï¼Œä¾‹å¦‚æˆ‘è¿™é‡Œldapä¸­æœ‰ä¸€ä¸ªnexusç”¨æˆ·ï¼Œåœ¨managerç»„ä¸‹é¢ï¼Œäºæ˜¯è¿™é‡Œæˆ‘å®šä¹‰ä¸€ä¸ªmapped roleä¸ºmanagerï¼Œåˆ™nexusä»¥åŠldapä¸­managerç»„ä¸­æ‰€æœ‰ç”¨æˆ·éƒ½ä¼šæ‹¥æœ‰è¿™é‡Œå®šä¹‰å¥½çš„æƒé™ï¼Œä¹Ÿå°±æ˜¯ç»„æƒé™æ˜ å°„ã€‚
Role Nameï¼š roleè§’è‰²çš„åç§°ã€‚
Role Descriptionï¼š è§’è‰²ä»‹ç»ã€‚
Privilegesï¼šå®šä¹‰çš„æ˜¯è§’è‰²çš„æƒé™ã€‚
Rolesï¼šå¯ä»¥ä¸å…¶å®ƒå®šä¹‰å¥½çš„roleå…³è”æƒé™ã€‚
</code></pre>
<h3 id="æµ‹è¯•">æµ‹è¯•</h3>
<p>åˆ›å»ºå¥½ä»¥åå›åˆ°åˆšåˆšçš„ldapè®¾ç½®ï¼Œç‚¹å‡»åˆšåˆšåˆ›å»ºçš„ldapï¼Œè¿›å…¥user and groupè®¾ç½®ï¼Œæœ€ä¸‹æ–¹æœ‰ä¸€ä¸ª verify user mapping ã€‚</p>
<figure data-type="image" tabindex="8"><img src="https://koko-club.github.io/post-images/ldap/image-20221110171936912.png" alt="image-20221110171936912" loading="lazy"></figure>
<p>ç‚¹å‡»å±äºldapå¯†ç å°±å¯ä»¥çœ‹åˆ°ç›®å‰å®šä¹‰æ˜ å°„çš„ç»„å’Œç”¨æˆ·æƒ…å†µ</p>
<figure data-type="image" tabindex="9"><img src="https://koko-club.github.io/post-images/ldap/image-20221110172056058.png" alt="image-20221110172056058" loading="lazy"></figure>
<p>è¿™é‡Œuser idå…¶å®å°±æ˜¯ä¸Šé¢user id attributeé…ç½®ï¼Œnameä¸ºReal name attributeé…ç½®ï¼Œemailä¸ºEmail attributeï¼Œrolesæ˜¯Map LDAP groups as rolesåŠä¸‹é¢æ‰€æœ‰ç»„é…ç½®å®šä¹‰çš„ã€‚å¦‚æœæœ‰æ²¡æœ‰æ•°æ®çš„å­—æ®µï¼Œè¯·æ£€æŸ¥è¯¥é¡¹å¯¹åº”é…ç½®çš„å­—æ®µæ˜¯å¦æ­£å¸¸é…ç½®ï¼Œä¾‹å¦‚å¦‚æœrolesæ²¡æœ‰ï¼Œè¯·çœ‹ä¸€ä¸‹Map LDAP groups as rolesä¸‹é¢çš„é…ç½®æ˜¯å¦æ­£ç¡®ã€‚</p>
<h1 id="ldap-for-jenkins">ldap for jenkins</h1>
<p>jenkinsé›†æˆldapçš„æ–¹æ³•</p>
<h2 id="1-å®‰è£…æ’ä»¶">1ã€å®‰è£…æ’ä»¶</h2>
<figure data-type="image" tabindex="10"><img src="https://koko-club.github.io/post-images/ldap/cb436a8c487d4df0b47bfea2f494bf77.png" alt="Jenkinså®‰è£…LDAPæ’ä»¶" loading="lazy"></figure>
<h2 id="2-é…ç½®ldap">2ã€é…ç½®ldap</h2>
<p>è¿›å…¥ç®¡ç†è®¾ç½®ï¼ˆmanage jenkinsï¼‰-&gt;å…¨å±€å®‰å…¨è®¾ç½®(configure global security),è®¾ç½®å®‰å…¨åŸŸä¸ºldap</p>
<figure data-type="image" tabindex="11"><img src="https://koko-club.github.io/post-images/ldap/image-20230210101753775.png" alt="image-20230210101753775" loading="lazy"></figure>
<h3 id="é…ç½®é¡¹">é…ç½®é¡¹</h3>
<pre><code>Serverï¼šldapçš„åœ°å€url
root DNï¼šæ ¹DNç›®å½•è·¯å¾„
User search baseï¼šæŸ¥æ‰¾ç”¨æˆ·çš„ç›®å½•
User search filterï¼šæŸ¥æ‰¾ç”¨æˆ·çš„æ¡ä»¶
Group search baseï¼š æŸ¥æ‰¾ç”¨æˆ·ç»„çš„ç›®å½•
Group search filterï¼š ç”¨æˆ·ç»„æ¡ä»¶(æŸ¥æ‰¾ç”¨æˆ·çš„æ¡ä»¶)
Group membershipï¼šé€‰æ‹© Search for LDAP groups containing user
Manager DNï¼š ç®¡ç†å‘˜æ‰€åœ¨è·¯å¾„
Manager Passwordï¼š ç®¡ç†å‘˜å¯†ç 
Display Name LDAP attributeï¼š jenkinså¯¹åº”ldapç”¨æˆ·åçš„å­—æ®µ
Email Address LDAP attributeï¼šemailå­—æ®µ
</code></pre>
<p>é…ç½®ç¤ºä¾‹ï¼š</p>
<figure data-type="image" tabindex="12"><img src="https://koko-club.github.io/post-images/ldap/image-20230210102814010.png" alt="image-20230210102814010" loading="lazy"></figure>
<p>è¿™é‡Œldapçš„ç»“æ„ä¸ºï¼Œç”¨æˆ·ç›®å½•ï¼šou=people,dc=xxx,dc=comï¼Œç”¨æˆ·ç»„ç›®å½•ï¼šou=group,dc=xxx,dc=com</p>
<figure data-type="image" tabindex="13"><img src="https://koko-club.github.io/post-images/ldap/image-20230210103422255.png" alt="image-20230210103422255" loading="lazy"></figure>
<figure data-type="image" tabindex="14"><img src="https://koko-club.github.io/post-images/ldap/image-20230210103437606.png" alt="image-20230210103437606" loading="lazy"></figure>
<p>è¿™é‡Œéœ€è¦æ³¨æ„çš„ç‚¹æ˜¯ï¼šuser search filterç”¨äºæ‰¾åˆ°ç”¨æˆ·ï¼Œå¦‚æœè¿™é‡Œå¡«é”™äº†å°†ä¼šæ‰¾ä¸åˆ°ç”¨æˆ·ã€‚group search baseåˆ™æ˜¯ç”¨äºæ‰¾åˆ°ç”¨æˆ·ç»„ï¼Œå¦‚æœè¿™é‡Œå¡«é”™äº†å°†æ‰¾ä¸åˆ°ç”¨æˆ·ï¼Œè€Œsearch filterç”¨äºæ‰¾åˆ°ç”¨æˆ·ç»„ä¸­çš„ç”¨æˆ·(&amp;(objectClass=posixGroup)(memberUid={1}))ï¼Œè¿™é‡Œçš„ç”¨æˆ·ç»„ä¸»è¦ç”¨äºæˆæƒæ—¶ä½¿ç”¨ï¼Œå¯¹ç»„è¿›è¡Œæˆæƒã€‚</p>
<h2 id="æµ‹è¯•-2">æµ‹è¯•</h2>
<p>é…ç½®å®Œæˆå¯ä»¥ç‚¹å‡»test ldap settingsæµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure data-type="image" tabindex="15"><img src="https://koko-club.github.io/post-images/ldap/image-20230210104457142.png" alt="image-20230210104457142" loading="lazy"></figure>
<figure data-type="image" tabindex="16"><img src="https://koko-club.github.io/post-images/ldap/image-20230210104515248.png" alt="image-20230210104515248" loading="lazy"></figure>
<h1 id="ldap-for-gitlab">ldap for gitlab</h1>
<p>gitlabå¹¶ä¸èƒ½ç›´æ¥é€šçŸ¥é¡µé¢è®¾ç½®æ¥å¯¹æ¥ldapï¼Œè€Œæ˜¯é€šè¿‡é…ç½®æ–‡ä»¶ã€‚</p>
<h2 id="1-ldapé…ç½®äºŒè¿›åˆ¶éƒ¨ç½²">1ã€ldapé…ç½®ï¼ˆäºŒè¿›åˆ¶éƒ¨ç½²ï¼‰</h2>
<p>è¿™é‡Œé…ç½®åˆ†ä¸ºä¸¤ç§ï¼šä¸€ç§æ˜¯äºŒè¿›åˆ¶åŒ…éƒ¨ç½²çš„gitlabï¼Œè¿™ä¸ªç”±äºæˆ‘å¹¶æ²¡æœ‰éƒ¨ç½²è¿‡ï¼Œæ‰€ä»¥ä¸‹é¢çš„é…ç½®æ‘˜æŠ„äºç½‘ä¸Šï¼Œä¸æ¸…æ¥šç‰ˆæœ¬æœ‰æ²¡æœ‰é…ç½®å˜åŒ–ï¼Œä½†é…ç½®å¤§è‡´çš„å­—æ®µåŸºæœ¬åº”è¯¥æ˜¯ä¸€è‡´çš„ï¼›è¿˜æœ‰ä¸€ç§æ–¹æ³•æ˜¯k8sçš„é…ç½®ï¼Œè¿™ç§ä¹Ÿæ˜¯ç›®å‰æˆ‘åœ¨ä½¿ç”¨çš„æ–¹å¼ï¼Œä¼šåœ¨ä¸‹é¢åˆ—å‡ºæ¥ã€‚</p>
<pre><code>å¦‚æœæ˜¯äºŒè¿›åˆ¶éƒ¨ç½²çš„åˆ™ç›´æ¥æ›´æ”¹é…ç½®æ–‡ä»¶
vi /etc/gitlab/gitlab.rb

gitlab_rails['ldap_enabled'] = true
gitlab_rails['prevent_ldap_sign_in'] = false
gitlab_rails['ldap_servers'] = {
'main' =&gt; {
  'label' =&gt; 'LDAP', # éšä¾¿è‡ªå®šä¹‰
  'host' =&gt;  '10.0.20.19', # ldapçš„serveråœ°å€
  'port' =&gt; 389, # ldapç«¯å£
  'uid' =&gt; 'cn', # é…ç½®ä¸ºcnæˆ–è€…snéƒ½å¯ä»¥ï¼Œä½†è¦æ³¨æ„ç”¨æˆ·åç§°å°†ä¼šä»¥æ­¤å¤„é…ç½®ä¸ºä¾æ®
  'bind_dn' =&gt; 'cn=admin,dc=aihelp,dc=net', # ç®¡ç†å‘˜è´¦å·
  'password' =&gt; '123456', # ç®¡ç†å‘˜å¯†ç 
  'encryption' =&gt; 'plain',  # åŠ å¯†
  'allow_username_or_email_login' =&gt; false,  # æ˜¯å¦å¯ç”¨é‚®ä»¶ä½œä¸ºç”¨æˆ·åç™»é™†
  'block_auto_created_users' =&gt; false, 
  'base' =&gt; 'dc=aihelp,dc=net',   # æ ¸å¿ƒé…ç½®ï¼Œè¡¨ç¤ºä»å“ªä¸€å±‚è¯»å–ç”¨æˆ·ä¿¡æ¯
  'user_filter' =&gt; '(memberof=cn=jenkins,ou=group,dc=aihelp,dc=net)', # LDAPç”¨æˆ·è¿›è¡Œè¿‡æ»¤
  'lowercase_usernames' =&gt; false,
  'group_base' =&gt; '',
  'admin_group' =&gt; '',
  'external_groups' =&gt; [],
  'sync_ssh_keys' =&gt; false
  }
}


</code></pre>
<pre><code>å…¶ä¸­ï¼š
label æ˜¯æ˜¾ç¤ºåœ¨GitLabç™»å½•æ¡†çš„ä¸Šæ–¹æ–‡å­—æè¿°ã€‚
host å’Œ port æ˜¯ LDAP æœåŠ¡çš„ä¸»æœºåœ°å€åŠç«¯å£
bind_dn å’Œ password æ˜¯ä¸€ä¸ªç®¡ç† LDAP çš„ dn åŠå¯†ç 
base è¡¨ç¤º LDAP å°†ä»¥è¯¥ dn ä¸º èŠ‚ç‚¹ï¼Œå‘ä¸‹æŸ¥æ‰¾ç”¨æˆ·
user_filter è¡¨ç¤ºä»¥æŸç§è¿‡æ»¤æ¡ä»¶ç­›é€‰ç”¨æˆ·ï¼Œæ¯”å¦‚å‡è®¾æˆ‘ä»¬åªå¸Œæœ›æ‰€å±ç»„ä¸º java-platform çš„ç”¨æˆ·æ¥è®¿é—® GitLabï¼Œåˆ™å¯ä»¥åœ¨è¿™é‡Œè®¾ç½® (memberOf=ou=java-platform,ou=people,dc=domain,dc=com)

é…ç½®æ·»åŠ ä¹‹åï¼Œä¾æ—§åƒå®‰è£…æ—¶å€™é‚£æ ·ï¼Œé‡è½½ä¸€ä¸‹é…ç½®ï¼š
gitlab-ctl reconfigure

 
Checking LDAP ...
LDAP: ... Server: ldapmain
LDAP authentication... Success
LDAP users with access to your GitLab server (only showing the first 100 results)
    DN: uid=test01,ou=people,dc=eryajf,dc=net    cn: ceshi
    DN: uid=test02,ou=people,dc=eryajf,dc=net    cn: test02
    DN: uid=test03,ou=people,dc=eryajf,dc=net    cn: test03
    DN: uid=admin,ou=people,dc=eryajf,dc=net     cn: Admin
Checking LDAP ... Finished
ä½¿ç”¨ldapç”¨æˆ·åå¯†ç è¿›è¡Œç™»é™†å³å¯ï¼Œæ­¤æ—¶ç™»é™†è¿›å»æ˜¯æ²¡æœ‰ä»»ä½•é¡¹ç›®çš„æƒé™ï¼Œå¦‚æœéœ€è¦æŸæƒé™ï¼Œå¯ä»¥å¯¹ç”¨æˆ·è¿›è¡Œç»„æˆ–è€…å•é¡¹ç›®çš„æˆæƒã€‚
</code></pre>
<h2 id="2-ldapé…ç½®k8s">2ã€ldapé…ç½®(k8s)</h2>
<p>ldapè¿™é‡Œç›´æ¥ç”¨helmçš„values.yamlä¼ é€’é…ç½®æ–‡ä»¶ä¿¡æ¯ï¼Œæ‰€ä»¥åœ¨ldapä¸­é…ç½®å°±è¡Œäº†ã€‚è¿™é‡Œå¦‚æœæ˜¯éƒ¨ç½²ä¹Ÿå»ºè®®é‡‡ç”¨helméƒ¨ç½²ï¼Œç”±äºgitlabæ–°ç‰ˆæœ¬æ¨¡å—è¿‡å¤šï¼Œå¦‚æœå†™yamlæ–‡ä»¶çš„è¯å†åŠ ä¸Šé…ç½®æ–‡ä»¶å’Œéœ€è¦æŒä¹…åŒ–çš„å­˜å‚¨è·¯å¾„å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥ä½¿ç”¨helmæ˜¯æ¯”è¾ƒç†æƒ³çš„æ–¹å¼ã€‚</p>
<pre><code>values.yaml:
----
    ldap:
      # prevent the use of LDAP for sign-in via web.
      preventSignin: false
      servers:
        main:
          label: 'LDAP' 
          host: '192.168.110.29' #ldapåœ°å€
          port: 30389 #ç«¯å£
          uid: 'uid' 
          bind_dn: 'cn=admin,dc=finsiot,dc=com' #ç®¡ç†å‘˜è·¯å¾„
          password: #ç®¡ç†å‘˜å¯†ç 
            secret: my-ldap-password-secret
            key: the-key-containing-the-password
          encryption: 'plain'
          base: 'ou=people,dc=finsiot,dc=com' #ç”¨æˆ·è·¯å¾„
          verify_certificates: true #å¿½ç•¥è¯ä¹¦
          active_directory: false
          allow_username_or_email_login: true #æ”¯æŒé‚®ä»¶å’Œç”¨æˆ·åç™»å½•
          block_auto_created_users: false
          user_filter: ''
          attributes:
            username: ['cn'] #ç”¨æˆ·åå¯¹åº”ldapå­—æ®µ
            email:    ['mail','email'] #é‚®ç®±å¯¹åº”ldapå­—æ®µ
            name:     'description' #ç”¨æˆ·æ˜¾ç¤ºåå­—å¯¹åº”ldapå­—æ®µ
            fister_name: 'givenName' 
            last_name:  'sn'
</code></pre>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œgitlab-ceä»…æ”¯æŒldapçš„ç”¨æˆ·é…ç½®ï¼Œä¸æ”¯æŒldapç”¨æˆ·ç»„çš„é…ç½®ï¼Œå¦‚æœæƒ³è¦ä½¿ç”¨ldapç”¨æˆ·ç»„ï¼Œéœ€è¦ä½¿ç”¨gitlab-eeï¼ˆå•†ä¸šç‰ˆæœ¬ï¼‰ã€‚</p>
<p>ldapçš„é…ç½®æ–‡ä»¶æ˜¯configmapï¼šgitlab-webserviceä¸‹é¢çš„gitlab.yml.erbï¼ŒæŒ‚è½½äºgitlab-webservice-defaultçš„/var/opt/gitlab/templates/gitlab.yml.erbè·¯å¾„ã€‚</p>
<h3 id="gitlabæ‹‰å–ldapè´¦å·æ•°æ®">gitlabæ‹‰å–ldapè´¦å·æ•°æ®</h3>
<h4 id="é—®é¢˜">é—®é¢˜</h4>
<p>ldapä¸åº”ç”¨ç»“åˆä¸€èˆ¬æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯æœåŠ¡éœ€è¦ç™»å½•æ—¶å»è°ƒç”¨ldapçš„è´¦å·æ•°æ®å®ç°ç»“åˆï¼Œè¿˜æœ‰ä¸€ç§æ˜¯æœåŠ¡é¢„å…ˆå°†ldapå­˜åœ¨è‡ªå·±æ•°æ®åº“ä¸­ç„¶åé€šè¿‡ldapçš„è´¦å·è¿›è¡Œç™»å½•ã€‚è€Œgitlabåˆ™æ˜¯åè€…ï¼Œè¿™ç§æƒ…å†µä¼šå¯¼è‡´æ–°åŠ äº†è´¦å·ä½†æ˜¯ldapå´æ²¡åŠæ³•ç›´æ¥ç”¨æ–°è´¦å·ç™»å½•ï¼Œå› ä¸ºgitlabå¹¶éæ˜¯ç™»å½•ç›´æ¥å»ldapè°ƒç”¨ï¼Œè€Œæ˜¯ä»è‡ªå·±æ•°æ®åº“ä¸­æ‰¾ldapè´¦å·æ•°æ®ã€‚</p>
<h4 id="è§£å†³åŠæ³•">è§£å†³åŠæ³•</h4>
<h5 id="1-å®šæ—¶">1ã€å®šæ—¶</h5>
<p>â€‹		å¯ä»¥åœ¨gitlabä¸­è®¾ç½®æ¯æ—¥å®šæ—¶ä»»åŠ¡ï¼Œå®šæ—¶ä»ldapä¸­æ‹‰å–æ•°æ®åˆ°è‡ªå·±çš„æ•°æ®åº“ã€‚</p>
<pre><code>K8S:
	è¿™é‡Œk8sæ˜¯åœ¨helmçš„éƒ¨ç½²æ–‡ä»¶values.yamlæ·»åŠ ä¿®æ”¹ï¼š
	cron_jobs:
	   ldap_sync_worker:
         cron: &quot;30 1 * * *&quot;
       ldap_group_sync_worker:
         cron: &quot;0 * * * *&quot;
äºŒè¿›åˆ¶éƒ¨ç½²ï¼š
	è¯·æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼šhttps://docs.gitlab.cn/jh/administration/auth/ldap/ldap_synchronization.html

</code></pre>
<h5 id="2-æ‰‹åŠ¨æ‹‰å–">2ã€æ‰‹åŠ¨æ‹‰å–</h5>
<pre><code>æ‰‹åŠ¨æ‹‰å–ä½¿ç”¨gitlab-rake gitlab:ldap:checkå‘½ä»¤å°±å¯ä»¥ï¼Œè¿™ä¸ªæ˜¯æµ‹è¯•ladpçš„å‘½ä»¤ï¼Œæµ‹è¯•çš„åŒæ—¶ä¼šæ‹‰å–ä¸€éæ•°æ®ã€‚
å¦‚æœæ˜¯k8séœ€è¦åœ¨gitlab-toolboxå®¹å™¨ä¸­æ‰§è¡Œè¯¥å‘½ä»¤
</code></pre>
<h1 id="mindoc-for-ldap">mindoc for ldap</h1>
<p>mindocæ˜¯ä¸€æ¬¾å¼€æºwikiæœåŠ¡ï¼Œç”±äºæ¯”è¾ƒå†·é—¨ï¼Œåé¢å¯èƒ½å‡ ä¹ç”¨ä¸åˆ°ï¼Œè¿™é‡Œå°±ç®€ç•¥è®°å½•ä¸€ä¸‹ï¼Œç›´æ¥è´´ä¸Šé…ç½®æ–‡ä»¶</p>
<pre><code>app.conf #mindocé…ç½®æ–‡ä»¶
     #æ˜¯å¦å¯ç”¨ldap
    ldap_enable=true
    #ldapä¸»æœºå
    ldap_host=192.168.110.29
    #ldapç«¯å£
    ldap_port=30389
    #ldapå†…å“ªä¸ªå±æ€§ä½œä¸ºç”¨æˆ·å
    ldap_attribute=uid
    #æœç´¢èŒƒå›´
    ldap_base=dc=finsiot,dc=com
    #ç¬¬ä¸€æ¬¡ç»‘å®šldapç”¨æˆ·dn
    ldap_user=cn=admin,dc=finsiot,dc=com
    #ç¬¬ä¸€æ¬¡ç»‘å®šldapç”¨æˆ·å¯†ç 
    ldap_password=123456
    #è‡ªåŠ¨æ³¨å†Œç”¨æˆ·è§’è‰²ï¼š0 è¶…çº§ç®¡ç†å‘˜ /1 ç®¡ç†å‘˜/ 2 æ™®é€šç”¨æˆ·
    ldap_user_role=2
    #ldapæœç´¢filterè§„åˆ™,ADæœåŠ¡å™¨: objectClass=User, openldapæœåŠ¡å™¨: objectClass=posixAccount ,ä¹Ÿå¯ä»¥å®šä¹‰ä¸ºå…¶ä»–å±æ€§,å¦‚: title=mindoc
    ldap_filter=objectClass=posixAccount

</code></pre>
<p>ç›´æ¥é…ç½®å¥½é‡å¯åº”ç”¨å°±å¯ä»¥ä½¿ç”¨ldapè´¦å·ç™»å½•äº†ã€‚</p>
<h1 id="zentao-for-ldap">zentao for ldap</h1>
<p>ç¦…é“æœåŠ¡æ¥å…¥ldap</p>
<h2 id="ldapæ’ä»¶éƒ¨ç½²">ldapæ’ä»¶éƒ¨ç½²</h2>
<p>ç¦…é“æœ¬èº«ä¸æ”¯æŒldapï¼Œéœ€è¦é¢å¤–å®‰è£…ldapæ’ä»¶ã€‚æ’ä»¶åœ°å€ï¼šhttps://github.com/yihoyoung/zentao-ldap</p>
<p><strong>éœ€è¦æ³¨æ„çš„æ˜¯ç›®å‰è¿™ä¸ªç‰ˆæœ¬æœ€é«˜ä»…æ”¯æŒç¦…é“12ï¼Œæœ¬äººæµ‹è¯•åœ¨ç¦…é“18ç‰ˆæœ¬ä¸Šé¢ä¸å…¼å®¹ã€‚</strong></p>
<p>å…¶å®‰è£…æ­¥éª¤åœ¨githubçš„readmeä¸­æœ‰è¯´æ˜ï¼š</p>
<pre><code>1.æ‰“åŒ… ldap æ–‡ä»¶å¤¹ä¸º ldap.zip æ–‡ä»¶
2.åˆ›å»ºæ–‡ä»¶ï¼š
touch /www/zentaopms/www/ok.txt
3.admin è´¦æˆ·ç™»é™†ç¦…é“ï¼Œåå° -&gt; æ’ä»¶ -&gt; æœ¬åœ°å®‰è£…ï¼Œé€‰æ‹©æ‰“åŒ…çš„ ldap.zip æ–‡ä»¶å®‰è£…å³å¯
</code></pre>
<h3 id="å…·ä½“æ­¥éª¤">å…·ä½“æ­¥éª¤</h3>
<p>ä¸‹è½½ldapä»£ç ï¼Œå°†è¿™ä¸ªæ–‡ä»¶æ‰“åŒ…æˆzipã€‚</p>
<figure data-type="image" tabindex="17"><img src="https://koko-club.github.io/post-images/ldap/image-20230213152207304.png" alt="image-20230213152207304" loading="lazy"></figure>
<p>åœ¨æœåŠ¡å™¨ä¸Šé¢åˆ›å»ºè¯¥æ–‡ä»¶ï¼štouch /www/zentaopms/www/ok.txt</p>
<p>ç„¶åç™»å½•ç¦…é“ç®¡ç†å‘˜è´¦å·ï¼Œéƒ¨ç½²æ’ä»¶å¦‚ä¸‹ï¼š</p>
<figure data-type="image" tabindex="18"><img src="https://koko-club.github.io/post-images/ldap/image-20230213152502090.png" alt="image-20230213152502090" loading="lazy"></figure>
<p>å®‰è£…æ–‡ä»¶æ—¶æç¤ºç‰ˆæœ¬ä¸å…¼å®¹ç‚¹å‡»å¼ºåˆ¶å®‰è£…å³å¯ã€‚</p>
<figure data-type="image" tabindex="19"><img src="https://koko-club.github.io/post-images/ldap/image-20230213152747071.png" alt="image-20230213152747071" loading="lazy"></figure>
<p>å®‰è£…æˆåŠŸä»¥ååå°ä¼šæœ‰ldapé…ç½®é¡¹ï¼š</p>
<figure data-type="image" tabindex="20"><img src="https://koko-club.github.io/post-images/ldap/image-20230213140948096.png" alt="image-20230213140948096" loading="lazy"></figure>
<h2 id="ldapé…ç½®è¯´æ˜">ldapé…ç½®è¯´æ˜</h2>
<pre><code>LDAPæœåŠ¡å™¨: ldapåœ°å€
åè®®ç‰ˆæœ¬ï¼š é»˜è®¤å¡«å†™3
BindDNï¼š ç®¡ç†è´¦å·åœ°å€
BindDN å¯†ç :	ç®¡ç†è´¦æˆ·å¯†ç 
BaseDN: ç”¨æˆ·åœ°å€
Search filter: æœç´¢ç”¨æˆ·çš„æ¡ä»¶ï¼Œopenldapè¿™ä¸ªæœåŠ¡é»˜è®¤æ˜¯objectClass=posixAccountï¼Œä¸åŒçš„ldapæœåŠ¡ä¸ä¸€æ ·
è´¦å·å­—æ®µ: ç™»å½•ç”¨æˆ·åå­—æ®µ
EMail å­—æ®µ: é‚®ç®±å­—æ®µ
å§“åå­—æ®µ: åå­—å­—æ®µ
</code></pre>
<p>ldapé…ç½®å®Œä»¥åå…ˆç‚¹å‡»ä¿å­˜é…ç½®ï¼Œç„¶åç‚¹å‡»æ‰‹åŠ¨åŒæ­¥ï¼Œå¦‚æœæœ‰åŒæ­¥çš„ç”¨æˆ·ä¿¡æ¯é‚£å°±è¡¨ç¤ºæ²¡é—®é¢˜äº†ã€‚</p>
<figure data-type="image" tabindex="21"><img src="https://koko-club.github.io/post-images/ldap/image-20230213153228070.png" alt="image-20230213153228070" loading="lazy"></figure>
<p>æœ€ååœ¨ç»„ç»‡-ã€‹ç”¨æˆ·ä¸­æŸ¥çœ‹å·²ç»é€šè¿‡ldapå¯¼å…¥çš„ç”¨æˆ·ä¿¡æ¯ã€‚</p>
<p>æ³¨æ„ï¼šé…ç½®äº†ldapä»¥åç³»ç»ŸåŸè´¦å·ç™»å½•éœ€è¦åœ¨ç”¨æˆ·åå‰é¢åŠ ä¸Šâ€œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">â€</mi><mi mathvariant="normal">ç¬¦</mi><mi mathvariant="normal">å·</mi><mi mathvariant="normal">ï¼Œ</mi><mi mathvariant="normal">ä¾‹</mi><mi mathvariant="normal">å¦‚</mi></mrow><annotation encoding="application/x-tex">â€ç¬¦å·ï¼Œä¾‹å¦‚</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">â€</span><span class="mord cjk_fallback">ç¬¦</span><span class="mord cjk_fallback">å·</span><span class="mord cjk_fallback">ï¼Œ</span><span class="mord cjk_fallback">ä¾‹</span><span class="mord cjk_fallback">å¦‚</span></span></span></span>adminã€‚</p>

<span id="footnote"></span>
<div id = "warn"></div>
</div>
<div class="toc-container"><ul class="markdownIt-TOC">
<li><a href="#ldap">ldap</a>
<ul>
<li><a href="#%E4%BB%80%E4%B9%88%E6%98%AFldap">ä»€ä¹ˆæ˜¯ldap</a></li>
<li><a href="#%E7%94%A8%E9%80%94">ç”¨é€”</a></li>
<li><a href="#ldap-%E6%A8%A1%E5%9E%8B">LDAP æ¨¡å‹</a>
<ul>
<li><a href="#%E5%9F%BA%E6%9C%AC%E6%A8%A1%E5%9E%8B">åŸºæœ¬æ¨¡å‹</a></li>
<li><a href="#%E4%BF%A1%E6%81%AF%E6%A8%A1%E5%9E%8B">ä¿¡æ¯æ¨¡å‹</a></li>
<li><a href="#%E5%91%BD%E5%90%8D%E6%A8%A1%E5%9E%8B">å‘½åæ¨¡å‹</a></li>
<li><a href="#%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9E%8B">åŠŸèƒ½æ¨¡å‹</a></li>
<li><a href="#%E5%AE%89%E5%85%A8%E6%A8%A1%E5%9E%8B">å®‰å…¨æ¨¡å‹</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#ldap-server">ldap server</a>
<ul>
<li><a href="#openldap">openldap</a>
<ul>
<li><a href="#k8s%E9%83%A8%E7%BD%B2">k8séƒ¨ç½²</a></li>
<li><a href="#ldap%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%83%A8%E7%BD%B2">ldapäºŒè¿›åˆ¶éƒ¨ç½²</a></li>
<li><a href="#ldap%E7%AE%A1%E7%90%86">ldapç®¡ç†</a></li>
</ul>
</li>
<li><a href="#ldapphpadmin">ldapphpadmin</a>
<ul>
<li><a href="#k8s%E9%83%A8%E7%BD%B2-2">k8séƒ¨ç½²</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#ldap-for-nexus">ldap for nexus</a>
<ul>
<li><a href="#1-ldap%E9%85%8D%E7%BD%AE">1ã€ldapé…ç½®</a></li>
<li><a href="#2-nexus%E9%85%8D%E7%BD%AE">2ã€nexusé…ç½®</a>
<ul>
<li><a href="#%E5%88%9B%E5%BB%BA%E8%A7%92%E8%89%B2">åˆ›å»ºè§’è‰²</a></li>
<li><a href="#%E6%B5%8B%E8%AF%95">æµ‹è¯•</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#ldap-for-jenkins">ldap for jenkins</a>
<ul>
<li><a href="#1-%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6">1ã€å®‰è£…æ’ä»¶</a></li>
<li><a href="#2-%E9%85%8D%E7%BD%AEldap">2ã€é…ç½®ldap</a>
<ul>
<li><a href="#%E9%85%8D%E7%BD%AE%E9%A1%B9">é…ç½®é¡¹</a></li>
</ul>
</li>
<li><a href="#%E6%B5%8B%E8%AF%95-2">æµ‹è¯•</a></li>
</ul>
</li>
<li><a href="#ldap-for-gitlab">ldap for gitlab</a>
<ul>
<li><a href="#1-ldap%E9%85%8D%E7%BD%AE%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%83%A8%E7%BD%B2">1ã€ldapé…ç½®ï¼ˆäºŒè¿›åˆ¶éƒ¨ç½²ï¼‰</a></li>
<li><a href="#2-ldap%E9%85%8D%E7%BD%AEk8s">2ã€ldapé…ç½®(k8s)</a>
<ul>
<li><a href="#gitlab%E6%8B%89%E5%8F%96ldap%E8%B4%A6%E5%8F%B7%E6%95%B0%E6%8D%AE">gitlabæ‹‰å–ldapè´¦å·æ•°æ®</a>
<ul>
<li><a href="#%E9%97%AE%E9%A2%98">é—®é¢˜</a></li>
<li><a href="#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95">è§£å†³åŠæ³•</a>
<ul>
<li><a href="#1-%E5%AE%9A%E6%97%B6">1ã€å®šæ—¶</a></li>
<li><a href="#2-%E6%89%8B%E5%8A%A8%E6%8B%89%E5%8F%96">2ã€æ‰‹åŠ¨æ‹‰å–</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#mindoc-for-ldap">mindoc for ldap</a></li>
<li><a href="#zentao-for-ldap">zentao for ldap</a>
<ul>
<li><a href="#ldap%E6%8F%92%E4%BB%B6%E9%83%A8%E7%BD%B2">ldapæ’ä»¶éƒ¨ç½²</a>
<ul>
<li><a href="#%E5%85%B7%E4%BD%93%E6%AD%A5%E9%AA%A4">å…·ä½“æ­¥éª¤</a></li>
</ul>
</li>
<li><a href="#ldap%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E">ldapé…ç½®è¯´æ˜</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="fullPage"><canvas id="canvas"></canvas></div>
</article>
<div id="eof"><span>EOF</span></div><div class="round-shape-one"></div>
<section>
<div class="doc_comments">

</div></section>
</div></div></div><script>
"use strict";!function(){for(var n=document.getElementsByTagName("pre"),e=n.length,s=0;s<e;s++){n[s].innerHTML='<span class="line-number"></span>'+n[s].innerHTML+'<span class="cl"></span>';for(var a=n[s].innerHTML.split(/\n/).length,r=0;r<a-1;r++){n[s].getElementsByTagName("span")[0].innerHTML+="<span>"+(r+1)+"</span>"}}}();
let mainNavLinks=document.querySelectorAll(".markdownIt-TOC a");window.addEventListener("scroll",event=>{let fromTop=window.scrollY;mainNavLinks.forEach((link,index)=>{let section=document.getElementById(decodeURI(link.hash).substring(1));let nextSection=null
if(mainNavLinks[index+1]){nextSection=document.getElementById(decodeURI(mainNavLinks[index+1].hash).substring(1));}
if(section.offsetTop<=fromTop){if(nextSection){if(nextSection.offsetTop>fromTop){link.classList.add("currentToc");}else{link.classList.remove("currentToc");}}else{link.classList.add("currentToc");}}else{link.classList.remove("currentToc");}});});
var h=document.documentElement,b=document.body,st="scrollTop",sh="scrollHeight",progress=document.querySelector(".progress"),scroll;document.addEventListener("scroll",function(){scroll=(h[st]||b[st])/((h[sh]||b[sh])-h.clientHeight)*100;progress.style.setProperty("--scroll",scroll+"%")});
var wxScale=new WxScale({fullPage:document.querySelector("#fullPage"),canvas:document.querySelector("#canvas")});var imgBox=document.querySelectorAll("#md_block img");for(var i=0;i<imgBox.length;i++){imgBox[i].onclick=function(e){wxScale.start(this)}};
</script>
<a id="scrollUp" href="#top" style="position: fixed; z-index: 2147483647; display: block;"></a><div class="footer animated fadeInDown"><div class="site_footer"><div class="mysocials"><div class="my_socials"></div></div><div class="copyright"id="copyright">Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>Copyright Â© 2018-2020 <a href="https://koko-club.github.io" style="margin:0;">Imcry</a>.</div>
<span style="display: inline;margin-right:15px;">ğŸ‘<strong><span id="busuanzi_value_site_uv"></span></strong></span><span id="busuanzi_container_page_pv" style="display: inline;"><span>ğŸ“š<strong>5</strong> posts</span></div></div>
<script>
console.log("\n %c \u26a1Theme: Bitcron-pro Author's Blog:https://blog.blinkstar.cn  Writen By Serence  \n\n", "color: #ffffff; background: rgba(49, 49, 49, 0.85); padding:5px 0;border-radius:5px;", );
</script>
<script src="https://cdn.jsdelivr.net/npm/instant.page@3.0.0/instantpage.min.js" type="module" defer></script>
<script type="text/javascript" async src="https://koko-club.github.io/media/js/prism.js"></script>
</body>
</html>